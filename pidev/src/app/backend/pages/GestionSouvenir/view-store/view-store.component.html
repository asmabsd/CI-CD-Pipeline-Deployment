<div class="d-flex justify-content-between mt-2">
  <button class="btn btn-sm btn-outline-secondary px-2 py-1" (click)="goBack()">
    <i class="fas fa-arrow-left fa-xs"></i> Back
  </button>
</div>
<div class="container mt-3">
  <link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css"
  />

  <!-- Loading indicator -->
  <div *ngIf="isLoading" class="text-center py-3">
    <div
      class="spinner-border spinner-border-sm text-primary"
      role="status"
    ></div>
    <p class="mt-2 small text-muted">Loading store details...</p>
  </div>

  <!-- Error message -->
  <div *ngIf="errorMessage" class="alert alert-danger py-2 px-3 mb-3 small">
    {{ errorMessage }}
  </div>

  <!-- Compact store details card -->
  <div *ngIf="store && !isLoading" class="card shadow-sm border-0">
    <div class="card-header bg-white py-2 px-3 border-bottom">
      <h6 class="mb-0 text-primary">store Details</h6>
    </div>
    <div class="card-body p-2">
      <ul class="list-group list-group-flush small">
        <li class="list-group-item px-2 py-1 d-flex justify-content-between">
          <span class="text-muted">Name:</span>
          <span>{{ store.name }}</span>
        </li>
        <li class="list-group-item px-2 py-1 d-flex justify-content-between">
          <span class="text-muted">Address:</span>
          <span>{{ store.address }}</span>
        </li>

        <li class="list-group-item px-2 py-1 d-flex justify-content-between">
          <span class="text-muted">Description:</span>
          <span>{{ store.description }}</span>
        </li>
        <li class="list-group-item px-2 py-1 d-flex justify-content-between">
          <span class="text-muted">Status:</span>
          <span>{{ store.status }}</span>
        </li>
        <li class="list-group-item px-2 py-1 d-flex justify-content-between">
          <span class="text-muted">Phone:</span>
          <span>+216 {{ store.phone | phoneFormat }}</span>
        </li>
      </ul>
      <!-- Compact action buttons -->
    </div>
  </div>
</div>

<!-- Essayez avec un chemin absolu -->

<!-- ‚ùó Bloc affich√© uniquement si le store est valide -->
<!-- ‚úÖ Bloc affich√© uniquement si le store est VALID -->
<div *ngIf="store?.status === storeStatusEnum.VALID" class="table-container">
  <div class="mb-3">
    <button class="btn btn-success" [routerLink]="['/dashboard/addSouvenir']"     [queryParams]="{ from: 'viewStore', storeId: store?.id }">
      <i class="fas fa-plus me-2"></i> Add a souvenir
    </button>
  </div>

  <div class="table-responsive">
    <table class="table table-striped table-hover custom-table">
      <thead>
        <tr>
          <th>Name</th>
          <th>Description</th>
          <th>Price</th>
          <th>Quantity</th>
          <th>Status</th>
          <th>Category</th>
          <th>Image</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let souvenir of souvenirs">
          <td>{{ souvenir.name }}</td>
          <td>{{ souvenir.description }}</td>
          <td>{{ souvenir.price | currency : "EUR" }}</td>
          <td>{{ souvenir.quantity }}</td>
          <td>{{ souvenir.status }}</td>
          <td>{{ souvenir.category }}</td>
          <td style="width: 180px; height: 180px;">
            <img [src]="getImageUrl(souvenir.photo)" alt="Souvenir" class="souvenir-image">
          </td>
          <td>
            <button class="btn-action btn-edit" [routerLink]="['/dashboard/editSouvenir', souvenir.id]"  [queryParams]="{ from: 'viewStore', storeId: store?.id }">
              <i class="fas fa-edit"></i> Edit
            </button>
            <button class="btn-action btn-view" [routerLink]="['/dashboard/viewSouvenir', souvenir.id]" [queryParams]="{ from: 'viewStore', storeId: store?.id }">
              <i class="fas fa-eye"></i> View
            </button>
            <button class="btn-action btn-delete" (click)="deleteSouvenir(souvenir.id)">
              <i class="fas fa-trash"></i> Delete
            </button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>

<!-- üõë Bloc affich√© si le store n'est pas valide -->
<!-- üõë Bloc affich√© si le store n'est pas VALID -->
<div *ngIf="store && store.status !== storeStatusEnum.VALID" class="alert alert-warning mt-4">
  Ce magasin n'est pas encore valid√©. Les souvenirs ne sont visibles qu'apr√®s validation.
</div>

<div class="update-hebergement-container styled-form">
  <h2>Update Accommodation</h2>
  <p>Formulaire valide : {{ hebergementForm.valid }}</p>
  <p>Formulaire erreurs : {{ hebergementForm.errors | json }}</p>
  <form [formGroup]="hebergementForm" (ngSubmit)="updateHebergement()" (submit)="logSubmit()">
    <div class="form-group">
      <label for="name">Name</label>
      <input type="text" id="name" formControlName="name" class="form-control" placeholder="Enter accommodation name" />
      <div *ngIf="hebergementForm.get('name')?.invalid && hebergementForm.get('name')?.touched" class="text-danger">
        <small *ngIf="hebergementForm.get('name')?.errors?.['required']">Name is required.</small>
        <small *ngIf="hebergementForm.get('name')?.errors?.['minlength']">Name must be at least 3 characters long.</small>
      </div>
    </div>

    <div class="form-group">
      <label for="type">Accommodation Type</label>
      <select id="type" formControlName="type" class="form-control">
        <option value="" disabled>Select a type</option>
        <option *ngFor="let type of typeHebergementValues" [value]="type">{{ type }}</option>
      </select>
      <div *ngIf="hebergementForm.get('type')?.invalid && hebergementForm.get('type')?.touched" class="text-danger">
        <small *ngIf="hebergementForm.get('type')?.errors?.['required']">Accommodation type is required.</small>
      </div>
    </div>

    <div class="form-group">
      <label for="adresse">Address</label>
      <input type="text" id="adresse" formControlName="adresse" class="form-control" placeholder="Enter address" />
      <div *ngIf="hebergementForm.get('adresse')?.invalid && hebergementForm.get('adresse')?.touched" class="text-danger">
        <small *ngIf="hebergementForm.get('adresse')?.errors?.['required']">Address is required.</small>
        <small *ngIf="hebergementForm.get('adresse')?.errors?.['minlength']">Address must be at least 7 characters long.</small>
      </div>
    </div>

    <div class="form-group">
      <label for="description">Description</label>
      <textarea id="description" formControlName="description" class="form-control" placeholder="Enter description" rows="4"></textarea>
      <div *ngIf="hebergementForm.get('description')?.invalid && hebergementForm.get('description')?.touched" class="text-danger">
        <small *ngIf="hebergementForm.get('description')?.errors?.['required']">Description is required.</small>
        <small *ngIf="hebergementForm.get('description')?.errors?.['minlength']">Description must be at least 10 characters long.</small>
      </div>
    </div>

    <div class="form-group">
      <label for="price">Price</label>
      <input type="number" id="price" formControlName="price" class="form-control" placeholder="Enter price" />
      <div *ngIf="hebergementForm.get('price')?.invalid && hebergementForm.get('price')?.touched" class="text-danger">
        <small *ngIf="hebergementForm.get('price')?.errors?.['required']">Price is required.</small>
        <small *ngIf="hebergementForm.get('price')?.errors?.['min']">Price must be greater than or equal to 0.</small>
      </div>
    </div>

    <div class="form-group">
      <label for="image">Accommodation Image:</label>
      <input type="file" id="image" (change)="onFileSelected($event)" class="form-control" accept="image/*">
      <div *ngIf="hebergementForm.get('imageUrl')?.invalid && hebergementForm.get('imageUrl')?.touched" class="text-danger">
        <small>Please select an image.</small>
      </div>
      <img *ngIf="previewUrl" [src]="previewUrl" alt="Preview" style="max-width: 200px; margin-top: 10px;">
    </div>

    <div class="form-group">
      <label for="availability">Availability</label>
      <select id="availability" formControlName="availability" class="form-control">
        <option value="" disabled>Select availability</option>
        <option value="available">Available</option>
        <option value="unavailable">Unavailable</option>
      </select>
      <div *ngIf="hebergementForm.get('availability')?.invalid && hebergementForm.get('availability')?.touched" class="text-danger">
        <small *ngIf="hebergementForm.get('availability')?.errors?.['required']">Availability is required.</small>
      </div>
    </div>

    <div class="form-group">
      <label for="telephone">Phone</label>
      <input type="tel" id="telephone" formControlName="telephone" class="form-control" placeholder="Enter phone number" />
      <div *ngIf="hebergementForm.get('telephone')?.invalid && hebergementForm.get('telephone')?.touched" class="text-danger">
        <small *ngIf="hebergementForm.get('telephone')?.errors?.['required']">Phone number is required.</small>
        <small *ngIf="hebergementForm.get('telephone')?.errors?.['pattern']">Please enter a valid 8-digit phone number.</small>
      </div>
    </div>

    <div class="form-group">
      <label for="region">Region</label>
      <select id="region" formControlName="region" class="form-control">
        <option value="" disabled>Select a region</option>
        <option *ngFor="let region of regions" [value]="region">{{ region }}</option>
      </select>
      <div *ngIf="hebergementForm.get('region')?.invalid && hebergementForm.get('region')?.touched" class="text-danger">
        <small *ngIf="hebergementForm.get('region')?.errors?.['required']">Region is required.</small>
      </div>
    </div>

    <div class="form-group">
      <label for="totalSingleChambres">Total Single Chambres</label>
      <input type="number" id="totalSingleChambres" formControlName="totalSingleChambres" class="form-control" placeholder="Total Single Chambres" />
      <div *ngIf="hebergementForm.get('totalSingleChambres')?.invalid && hebergementForm.get('totalSingleChambres')?.touched" class="text-danger">
        <small *ngIf="hebergementForm.get('totalSingleChambres')?.errors?.['required']">This field is required.</small>
        <small *ngIf="hebergementForm.get('totalSingleChambres')?.errors?.['min']">Value must be 0 or greater.</small>
      </div>
    </div>

    <div class="form-group">
      <label for="totalDoubleChambres">Total Double Chambres</label>
      <input type="number" id="totalDoubleChambres" formControlName="totalDoubleChambres" class="form-control" placeholder="Total Double Chambres" />
      <div *ngIf="hebergementForm.get('totalDoubleChambres')?.invalid && hebergementForm.get('totalDoubleChambres')?.touched" class="text-danger">
        <small *ngIf="hebergementForm.get('totalDoubleChambres')?.errors?.['required']">This field is required.</small>
        <small *ngIf="hebergementForm.get('totalDoubleChambres')?.errors?.['min']">Value must be 0 or greater.</small>
      </div>
    </div>

    <div class="form-group">
      <label for="totalSuiteChambres">Total Suite Chambres</label>
      <input type="number" id="totalSuiteChambres" formControlName="totalSuiteChambres" class="form-control" placeholder="Total Suite Chambres" />
      <div *ngIf="hebergementForm.get('totalSuiteChambres')?.invalid && hebergementForm.get('totalSuiteChambres')?.touched" class="text-danger">
        <small *ngIf="hebergementForm.get('totalSuiteChambres')?.errors?.['required']">This field is required.</small>
        <small *ngIf="hebergementForm.get('totalSuiteChambres')?.errors?.['min']">Value must be 0 or greater.</small>
      </div>
    </div>

    <div class="form-group">
      <label for="totalDelexueChambres">Total Deluxe Chambres</label>
      <input type="number" id="totalDelexueChambres" formControlName="totalDelexueChambres" class="form-control" placeholder="Total Deluxe Chambres" />
      <div *ngIf="hebergementForm.get('totalDelexueChambres')?.invalid && hebergementForm.get('totalDelexueChambres')?.touched" class="text-danger">
        <small *ngIf="hebergementForm.get('totalDelexueChambres')?.errors?.['required']">This field is required.</small>
        <small *ngIf="hebergementForm.get('totalDelexueChambres')?.errors?.['min']">Value must be 0 or greater.</small>
      </div>
    </div>

    <button type="submit" class="btn-primary" [disabled]="hebergementForm.invalid">Update Accommodation</button>
  </form>
</div>  